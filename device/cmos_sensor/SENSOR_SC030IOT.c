#include "cmos_sensor.h"


#if DEV_SENSOR_SC030IOT > 0

SENSOR_INIT_SECTION const unsigned char SC030IOTInitTable[]=
{
	0xf0,0x30,
	0x01,0xff,
	0x02,0xff,
	0x22,0x07,
	0x19,0xff,
	0x3f,0x82,
	0x30,0x02,
	0xf0,0x01,
	0x70,0x00,
	0x71,0x80,
	0x72,0x20,
	0x73,0x00,
	0x74,0xe0,
	0x75,0x10,
	0x76,0x81,
	0x77,0x8c,
	0x78,0xe1,
	0x79,0x31,
	0x7a,0x06,	// bit4 lsyn polarity , bit4 vsyn polarity , 
	0xf5,0x01,
	0xf4,0x0a,
	0xf0,0x36,
	0x37,0x79,
	0x31,0x82,
	0x3e,0x60,
	0x30,0xf0,
	0x33,0x33,
	0xf0,0x32,
	0x48,0x02,
	0xf0,0x33,
	0x02,0x12,
	0x7c,0x02,
	0x7d,0x0e,
	0xa2,0x04,
	0x5e,0x06,
	0x5f,0x0a,
	0x0b,0x58,
	0x06,0x38,
	0xf0,0x32,
	0x0e,0x08,
	0x0f,0x35,
	0x48,0x02,
	0xf0,0x39,
	0x02,0x70,
	0xf0,0x45,
	0x09,0x1c,
	0xf0,0x37,
	0x22,0x0d,
	0xf0,0x33,
	0x33,0x10,
	0xb1,0x80,
	0x34,0x40,
	0x0b,0x54,
	0xb2,0x78,
	0xf0,0x36,
	0x11,0x80,
	0xf0,0x30,
	0x38,0x44,
	0xf0,0x33,
	0xb3,0x51,
	0x01,0x10,
	0x0b,0x6c,
	0x06,0x24,
	0xf0,0x36,
	0x31,0x82,
	0x3e,0x60,
	0x30,0xf0,
	0x33,0x33,
	0xf0,0x34,
	0x9f,0x02,
	0xa6,0x40,
	0xa7,0x47,
	0xe8,0x5f,
	0xa8,0x51,
	0xa9,0x44,
	0xe9,0x36,
	0xf0,0x33,
	0xb3,0x51,
	0x64,0x17,
	0x90,0x01,
	0x91,0x03,
	0x92,0x07,
	0x01,0x10,
	0x93,0x10,
	0x94,0x10,
	0x95,0x10,
	0x96,0x01,
	0x97,0x07,
	0x98,0x1f,
	0x99,0x10,
	0x9a,0x20,
	0x9b,0x28,
	0x9c,0x28,
	0xf0,0x36,
	0x70,0x54,
	0xb6,0x40,
	0xb7,0x41,
	0xb8,0x43,
	0xb9,0x47,
	0xba,0x4f,
	0xb0,0x8b,
	0xb1,0x8b,
	0xb2,0x8b,
	0xb3,0x9b,
	0xb4,0xb8,
	0xb5,0xf0,
	0x7e,0x41,
	0x7f,0x47,
	0x77,0x80,
	0x78,0x84,
	0x79,0x8a,
	0xa0,0x47,
	0xa1,0x5f,
	0x96,0x43,
	0x97,0x44,
	0x98,0x54,
	0xf0,0x00,
	0xf0,0x01,
	0x73,0x00,
	0x74,0xe0,
	0x70,0x00,
	0x71,0x80,
	0xf0,0x36,
	0x37,0x74,
	0xf0,0x3f,
	0x03,0x8d,
	0xf0,0x36,//cvbs_off
	0x11,0x80,
	0xf0,0x01,
	0x79,0xc1,
	0xf0,0x37,
	0x24,0x21,
	0xf0,0x36,
	0x41,0x61,// bit0 bit1 pad cap
	0xf0,0x00,
	0x72,0x3d,//AE   38
	0x7a,0x80,
	0x7e,0x25,
	0x85,0x18,
	0x9b,0x35,
	0x9e,0x20,
	0xd0,0x6b,//ee  66
	0xd1,0x34,
	0Xd3,0x55,//ddc  44 
	0xd5,0x38,//24
	0xd6,0x55,//44
	0xd8,0x40,//28
	0xb0,0x41,//41 awb ON
	0xb2,0x48,
	0xb3,0xf4,
	0xb4,0x0b,
	0xb5,0x78,
	0xba,0xff,
	0xbb,0xc0,
	0xbc,0x90,
	0xbd,0x3a,
	0xc1,0x67,
	0xc8,0x60,
	0xc9,0x60,
	0xf0,0x01,
	0x20,0x13,//11   ccm
	0x23,0x90,
	0x24,0x18,// green  15
	0x25,0x88,//87
	0x28,0x2b,
	0xbc,0x9f,
	0xbd,0x3a,
	0x48,0xe6,
	0x49,0xd0,//c0
	0x4a,0xd8,//d0
	0x4b,0x55,//duibidu  48
	0xf0,0x00,
	0x71,0x92,
	0x7c,0x03,
	0x84,0xb4,
	0xf0,0x33,
	0x14,0x95,
	0xf0,0x32,//fanzhuan
	0x21,0x66,//[2:1] 1:morror ;0:disable	[6:5] 1:flip ;0:disable

	0xf0,0x32,	
	0x0c,0x04,	// hblank
	0x0d,0x84,
	0x0e,0x03,	//6  vblank  25fps
	0x0f,0xC5,//26
	0xf0,0x00,
	0x87,0x65,
	0x7c,0xc4,
	0x7e,0x45,
	0xf0,0x36,
	0x77,0x83,

	0xff,0xff,
};

SENSOR_INIT_SECTION const unsigned char SC030IOTInitTable1[]=
{
	0xf0,0x30,
	0x01,0xff,
	0x02,0xff,
	0x22,0x07,
	0x19,0xff,
	0x3f,0x82,
	0x30,0x02,
	0xf0,0x01,
	0x70,0x00,
	0x71,0x80,
	0x72,0x20,
	0x73,0x00,
	0x74,0xe0,
	0x75,0x10,
	0x76,0x81,
	0x77,0x8c,
	0x78,0xe1,
	0x79,0x31,
	0x7a,0x06,	// bit4 lsyn polarity , bit4 vsyn polarity , 
	0xf5,0x01,
	0xf4,0x0a,
	0xf0,0x36,
	0x37,0x79,
	0x31,0x82,
	0x3e,0x60,
	0x30,0xf0,
	0x33,0x33,
	0xf0,0x32,
	0x48,0x02,
	0xf0,0x33,
	0x02,0x12,
	0x7c,0x02,
	0x7d,0x0e,
	0xa2,0x04,
	0x5e,0x06,
	0x5f,0x0a,
	0x0b,0x58,
	0x06,0x38,
	0xf0,0x32,
	0x0e,0x04,
	0x0f,0x18,
	0x48,0x02,
	0xf0,0x39,
	0x02,0x70,
	0xf0,0x45,
	0x09,0x1c,
	0xf0,0x37,
	0x22,0x0d,
	0xf0,0x33,
	0x33,0x10,
	0xb1,0x80,
	0x34,0x40,
	0x0b,0x54,
	0xb2,0x78,
	0xf0,0x36,
	0x11,0x80,
	0xf0,0x30,
	0x38,0x44,
	0xf0,0x33,
	0xb3,0x51,
	0x01,0x10,
	0x0b,0x6c,
	0x06,0x24,
	0xf0,0x36,
	0x31,0x82,
	0x3e,0x60,
	0x30,0xf0,
	0x33,0x33,
	0xf0,0x34,
	0x9f,0x02,
	0xa6,0x40,
	0xa7,0x47,
	0xe8,0x5f,
	0xa8,0x51,
	0xa9,0x44,
	0xe9,0x36,
	0xf0,0x33,
	0xb3,0x51,
	0x64,0x17,
	0x90,0x01,
	0x91,0x03,
	0x92,0x07,
	0x01,0x10,
	0x93,0x10,
	0x94,0x10,
	0x95,0x10,
	0x96,0x01,
	0x97,0x07,
	0x98,0x1f,
	0x99,0x10,
	0x9a,0x20,
	0x9b,0x28,
	0x9c,0x28,
	0xf0,0x36,
	0x70,0x54,
	0xb6,0x40,
	0xb7,0x41,
	0xb8,0x43,
	0xb9,0x47,
	0xba,0x4f,
	0xb0,0x8b,
	0xb1,0x8b,
	0xb2,0x8b,
	0xb3,0x9b,
	0xb4,0xb8,
	0xb5,0xf0,
	0x7e,0x41,
	0x7f,0x47,
	0x77,0x80,
	0x78,0x84,
	0x79,0x8a,
	0xa0,0x47,
	0xa1,0x5f,
	0x96,0x43,
	0x97,0x44,
	0x98,0x54,
	0xf0,0x00,
	0xf0,0x01,
	0x73,0x00,
	0x74,0xe0,
	0x70,0x00,
	0x71,0x80,
	0xf0,0x36,
	0x37,0x74,
	0xf0,0x3f,
	0x03,0x8d,
	0xf0,0x36,//cvbs_off
	0x11,0x80,
	0xf0,0x01,
	0x79,0xc1,
	0xf0,0x37,
	0x24,0x21,
	0xf0,0x36,
	0x41,0x61,// bit0 bit1 pad cap
	0xf0,0x00,
	0x72,0x3d,//AE   38
	0x7a,0x80,
	0x7e,0x25,
	0x85,0x18,
	0x9b,0x35,
	0x9e,0x20,
	0xd0,0x6b,//ee  66
	0xd1,0x34,
	0Xd3,0x55,//ddc  44 
	0xd5,0x38,//24
	0xd6,0x55,//44
	0xd8,0x40,//28
	0xb0,0x41,//41 awb ON
	0xb2,0x48,
	0xb3,0xf4,
	0xb4,0x0b,
	0xb5,0x78,
	0xba,0xff,
	0xbb,0xc0,
	0xbc,0x90,
	0xbd,0x3a,
	0xc1,0x67,
	0xc8,0x60,
	0xc9,0x60,
	0xf0,0x01,
	0x20,0x13,//11   ccm
	0x23,0x90,
	0x24,0x18,// green  15
	0x25,0x88,//87
	0x28,0x2b,
	0xbc,0x9f,
	0xbd,0x3a,
	0x48,0xe6,
	0x49,0xd0,//c0
	0x4a,0xd8,//d0
	0x4b,0x55,//duibidu  48
	0xf0,0x00,
	0x71,0x92,
	0x7c,0x03,
	0x84,0xb4,
	0xf0,0x33,
	0x14,0x95,
	0xf0,0x32,//fanzhuan
	0x21,0x60,//[2:1] 1:morror ;0:disable	[6:5] 1:flip ;0:disable

	0xf0,0x32,	
	0x0c,0x04,	// hblank
	0x0d,0x84,
	0x0e,0x03,	//6  vblank  25fps
	0x0f,0xC5,//26
	0xf0,0x00,
	0x87,0x65,
	0x7c,0xc4,
	0x7e,0x45,
	0xf0,0x36,
	0x77,0x83,

	0xff,0xff,
};


static void SC030IOT_rotate(u32 r)
{
	// unsigned char buf[2];
	// buf[0] = 0x1e;
	// buf[1] = 0x40|(r<<4);
	// //	sensor_iic_enable();
	// //	sensor_iic_info();
		
	// sensor_iic_write(buf);
		
	// //	sensor_iic_disable();

}

static void SC030IOT_hvblank(u32 h,u32 v)
{
	// u32 i;
	// const u8 t[][2] = {
	// 	{0x2a,(h >> 8) << 4 },
	// 	{0x2b,h & 0xff},
	// 	{0x92,v & 0xff},
	// 	{0x93,v >> 8},
	// 	{0xe3,0x09},
	// 	{0xe4,0},
	// };
	
	// for(i=0;i<6;i++)
	// 	sensor_iic_write((u8 *)&t[i][0]);
	//	sensor_iic_disable();
}

SENSOR_OP_SECTION const Sensor_Op_t sc030iot_cmd=
{
	.typ = CSI_TYPE_YUV422,
	.pixelw = 640,
	.pixelh= 480,
//	.pixelw = 320,
//	.pixelh= 240,
	.hsyn = 1,
	.vsyn = 1,
	.AVDD = SYS_VOL_V2_7,
	.DVDD = SYS_VOL_V1_5,
	.VDDIO = SYS_VOL_V2_7,

	// .AVDD = SYS_VOL_V2_8,
	// .DVDD = SYS_VOL_V1_5,
	// .VDDIO = SYS_VOL_V2_8,
	.colrarray = 2,//0:_RGRG_ 1:_GRGR_,2:_BGBG_,3:_GBGB_
	.rotate_adapt = {0},
	.hvb_adapt = {42000000,1120,0,0,0xff,25,0},
	.mclk = 12000000,
	.p_fun_adapt = {NULL,NULL,NULL},
};

SENSOR_HEADER_ITEM_SECTION const Sensor_Init_t sc030iot_init=
{
	.sensor_struct_addr =	(u32 *)&sc030iot_cmd,      
	.sensor_struct_size = sizeof(Sensor_Op_t),
	.sensor_init_tab_adr =	(u32 *)SC030IOTInitTable,     
	.sensor_init_tab_size = sizeof(SC030IOTInitTable),
	.sensor_init_tab_adr2 =	(u32 *)SC030IOTInitTable1,     
	.sensor_init_tab_size2 = sizeof(SC030IOTInitTable1),
	.id               =	0x46,                    
	.w_cmd            =	0xd0,                    
	.r_cmd            =	0xd1,                    
	.addr_num         =	0x01,                    
	.data_num         =	0x01,                    
	.id_reg           =	0xf8,    
	.sensor_name      = "030iot",       
};


#endif

